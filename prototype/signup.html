<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Sign Up - Investing101</title>
	<link rel="stylesheet" href="styles.css">
	<style>
		:root {
			--signin-bg: linear-gradient(135deg, #04131d, #0f4c3a 58%, #0fa36b);
			--signin-card-bg: rgba(10, 21, 28, 0.92);
			--signin-hero-glow: rgba(53, 235, 178, 0.35);
			--signin-input-bg: rgba(8, 21, 28, 0.75);
			--signin-border: rgba(255, 255, 255, 0.08);
			--signin-muted: rgba(224, 236, 231, 0.72);
			--signin-primary: #2dd4bf;
			--signin-primary-dark: #0f8a5f;
		}

		*,
		*::before,
		*::after {
			box-sizing: border-box;
		}

		html,
		body {
			height: 100%;
			margin: 0;
		}

		body.signup-page {
			min-height: 100vh;
			display: flex;
			align-items: center;
			justify-content: center;
			background: var(--signin-bg);
			color: #f2fbf7;
			font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
			position: relative;
			overflow: hidden;
		}

		body.signup-page::before,
		body.signup-page::after {
			content: "";
			position: absolute;
			width: 420px;
			height: 420px;
			border-radius: 50%;
			background: radial-gradient(circle at center, var(--signin-hero-glow), rgba(5, 24, 34, 0));
			z-index: 0;
		}

		body.signup-page::before {
			top: -120px;
			left: -140px;
		}

		body.signup-page::after {
			bottom: -160px;
			right: -140px;
		}

		/* Floating orbs animation */
		.floating-orb {
			position: absolute;
			border-radius: 50%;
			background: radial-gradient(circle at 30% 30%, rgba(53, 235, 178, 0.4), rgba(45, 212, 191, 0.15), transparent);
			filter: blur(40px);
			pointer-events: none;
			z-index: 0;
		}

		.floating-orb-1 {
			width: 300px;
			height: 300px;
			top: 10%;
			left: 5%;
			animation: float-1 20s ease-in-out infinite;
		}

		.floating-orb-2 {
			width: 200px;
			height: 200px;
			top: 60%;
			right: 10%;
			animation: float-2 15s ease-in-out infinite;
		}

		.floating-orb-3 {
			width: 250px;
			height: 250px;
			bottom: 15%;
			left: 15%;
			animation: float-3 18s ease-in-out infinite;
		}

		.floating-orb-4 {
			width: 150px;
			height: 150px;
			top: 30%;
			right: 20%;
			animation: float-4 12s ease-in-out infinite;
		}

		.floating-orb-5 {
			width: 180px;
			height: 180px;
			bottom: 30%;
			right: 5%;
			animation: float-5 16s ease-in-out infinite;
		}

		@keyframes float-1 {
			0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.3; }
			25% { transform: translate(30px, -40px) scale(1.1); opacity: 0.5; }
			50% { transform: translate(-20px, -80px) scale(0.9); opacity: 0.4; }
			75% { transform: translate(40px, -40px) scale(1.05); opacity: 0.45; }
		}

		@keyframes float-2 {
			0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.35; }
			30% { transform: translate(-40px, 30px) scale(1.15); opacity: 0.5; }
			60% { transform: translate(20px, 60px) scale(0.95); opacity: 0.4; }
			80% { transform: translate(-30px, 20px) scale(1.1); opacity: 0.45; }
		}

		@keyframes float-3 {
			0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.4; }
			20% { transform: translate(50px, 30px) scale(1.1); opacity: 0.55; }
			50% { transform: translate(-30px, -20px) scale(0.9); opacity: 0.45; }
			70% { transform: translate(40px, 10px) scale(1.05); opacity: 0.5; }
		}

		@keyframes float-4 {
			0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.3; }
			35% { transform: translate(-25px, -50px) scale(1.2); opacity: 0.5; }
			65% { transform: translate(35px, 40px) scale(0.85); opacity: 0.35; }
			85% { transform: translate(-20px, -30px) scale(1.1); opacity: 0.45; }
		}

		@keyframes float-5 {
			0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.35; }
			25% { transform: translate(45px, -35px) scale(1.15); opacity: 0.5; }
			55% { transform: translate(-35px, 25px) scale(0.9); opacity: 0.4; }
			75% { transform: translate(30px, -20px) scale(1.05); opacity: 0.45; }
		}

		.signup-shell {
			position: relative;
			width: min(1050px, 92vw);
			min-height: clamp(580px, 75vh, 720px);
			display: flex;
			background: rgba(3, 13, 18, 0.68);
			border: 1px solid rgba(255, 255, 255, 0.06);
			border-radius: 28px;
			box-shadow: 0 34px 60px rgba(7, 24, 20, 0.45);
			backdrop-filter: blur(22px);
			overflow: hidden;
			z-index: 1;
		}

		.signup-hero {
			flex: 1.1;
			display: flex;
			flex-direction: column;
			justify-content: space-between;
			gap: clamp(32px, 6vw, 48px);
			padding: clamp(42px, 6vw, 58px);
			border-right: 1px solid rgba(255, 255, 255, 0.06);
			background: linear-gradient(145deg, rgba(11, 32, 40, 0.9), rgba(5, 24, 34, 0.65));
			position: relative;
		}

		.signup-hero::after {
			content: "";
			position: absolute;
			inset: 36px;
			border-radius: 24px;
			background: radial-gradient(circle at top right, rgba(53, 235, 178, 0.19), rgba(14, 44, 52, 0));
			pointer-events: none;
			z-index: 0;
		}

		.signup-hero__header {
			position: relative;
			z-index: 2;
		}

		.signup-hero__logo {
			display: inline-flex;
			align-items: center;
			gap: 10px;
			font-size: 1.5rem;
			font-weight: 700;
			color: #2dd4bf;
			text-decoration: none;
			letter-spacing: -0.02em;
		}

		.signup-hero__tagline {
			margin-top: 18px;
			font-size: 0.95rem;
			line-height: 1.5;
			color: var(--signin-muted);
		}

		.signup-hero__features {
			position: relative;
			z-index: 2;
			display: flex;
			flex-direction: column;
			gap: 22px;
		}

		.signup-feature {
			display: flex;
			align-items: flex-start;
			gap: 16px;
		}

		.signup-feature__icon {
			flex-shrink: 0;
			width: 44px;
			height: 44px;
			display: flex;
			align-items: center;
			justify-content: center;
			border-radius: 12px;
			background: rgba(53, 235, 178, 0.12);
			border: 1px solid rgba(53, 235, 178, 0.18);
			font-size: 1.3rem;
		}

		.signup-feature__text h4 {
			margin: 0 0 5px;
			font-size: 1.05rem;
			font-weight: 600;
		}

		.signup-feature__text p {
			margin: 0;
			font-size: 0.9rem;
			color: var(--signin-muted);
			line-height: 1.5;
		}

		.signup-form-box {
			flex: 1;
			display: flex;
			flex-direction: column;
			padding: clamp(42px, 6vw, 58px);
			background: var(--signin-card-bg);
		}

		.signup-form-box__header {
			margin-bottom: 32px;
		}

		.signup-form-box__header h1 {
			margin: 0 0 10px;
			font-size: clamp(1.7rem, 3vw, 2rem);
			font-weight: 700;
			letter-spacing: -0.02em;
		}

		.signup-form-box__header p {
			margin: 0;
			font-size: 0.95rem;
			color: var(--signin-muted);
		}

		.signup-form-box__form {
			display: flex;
			flex-direction: column;
			gap: 18px;
		}

		.signup-field {
			display: flex;
			flex-direction: column;
			gap: 8px;
		}

		.signup-field label {
			font-size: 0.9rem;
			font-weight: 500;
			color: #e0ece7;
		}

		.signup-field input {
			padding: 14px 16px;
			background: var(--signin-input-bg);
			border: 1px solid var(--signin-border);
			border-radius: 10px;
			font-size: 0.95rem;
			color: #f2fbf7;
			transition: all 180ms ease;
			outline: none;
		}

		.signup-field input::placeholder {
			color: rgba(224, 236, 231, 0.45);
		}

		.signup-field input:focus {
			border-color: var(--signin-primary);
			background: rgba(8, 21, 28, 0.9);
			box-shadow: 0 0 0 3px rgba(45, 212, 191, 0.15);
		}

		.signup-terms {
			display: flex;
			align-items: flex-start;
			gap: 10px;
			font-size: 0.88rem;
			color: var(--signin-muted);
		}

		.signup-terms input[type="checkbox"] {
			margin-top: 2px;
			accent-color: var(--signin-primary);
		}

		.signup-terms a {
			color: var(--signin-primary);
			text-decoration: none;
		}

		.signup-terms a:hover {
			text-decoration: underline;
		}

		.signup-btn {
			padding: 15px 24px;
			background: linear-gradient(135deg, var(--signin-primary), var(--signin-primary-dark));
			color: #fff;
			font-size: 1rem;
			font-weight: 600;
			border: none;
			border-radius: 10px;
			cursor: pointer;
			transition: all 200ms ease;
		}

		.signup-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 12px 24px rgba(45, 212, 191, 0.3);
		}

		.signup-divider {
			position: relative;
			margin: 24px 0;
			text-align: center;
		}

		.signup-divider span {
			background: var(--signin-card-bg);
			padding: 0 16px;
			position: relative;
			z-index: 1;
			color: var(--signin-muted);
			font-size: 0.9rem;
		}

		.signup-divider::before {
			content: "";
			position: absolute;
			top: 50%;
			left: 0;
			right: 0;
			height: 1px;
			background: var(--signin-border);
		}

		.signup-oauth {
			display: flex;
			gap: 12px;
		}

		.signup-oauth-btn {
			flex: 1;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 10px;
			padding: 13px 20px;
			background: rgba(255, 255, 255, 0.05);
			border: 1px solid var(--signin-border);
			border-radius: 10px;
			color: #f2fbf7;
			font-size: 0.95rem;
			font-weight: 500;
			cursor: pointer;
			transition: all 180ms ease;
		}

		.signup-oauth-btn:hover {
			background: rgba(255, 255, 255, 0.08);
			border-color: rgba(255, 255, 255, 0.15);
		}

		.signup-footer {
			margin-top: 28px;
			text-align: center;
			font-size: 0.9rem;
			color: var(--signin-muted);
		}

		.signup-footer a {
			color: var(--signin-primary);
			text-decoration: none;
			font-weight: 500;
		}

		.signup-footer a:hover {
			text-decoration: underline;
		}

		/* Guest mode button */
		.signup-guest {
			margin-top: 20px;
			padding: 12px 20px;
			background: rgba(45, 212, 191, 0.08);
			border: 1px solid rgba(45, 212, 191, 0.25);
			border-radius: 12px;
			color: rgba(173, 241, 226, 0.9);
			font-size: 0.95rem;
			cursor: pointer;
			transition: all 0.2s ease;
			width: 100%;
			font-weight: 500;
		}

		.signup-guest:hover {
			background: rgba(45, 212, 191, 0.15);
			border-color: rgba(45, 212, 191, 0.4);
			transform: translateY(-1px);
		}

		#signupStatus {
			min-height: 1.2em;
			font-size: 0.9rem;
			text-align: center;
			margin-top: 12px;
		}

		#signupStatus.error {
			color: #ff6b6b;
		}

		#signupStatus.success {
			color: var(--signin-primary);
		}

		@media (max-width: 900px) {
			.signup-hero {
				display: none;
			}
			.signup-shell {
				min-height: auto;
			}
		}
	</style>
</head>
<body class="signup-page">
	<!-- Floating animated orbs -->
	<div class="floating-orb floating-orb-1"></div>
	<div class="floating-orb floating-orb-2"></div>
	<div class="floating-orb floating-orb-3"></div>
	<div class="floating-orb floating-orb-4"></div>
	<div class="floating-orb floating-orb-5"></div>
	
	<div class="signup-shell">
		<aside class="signup-hero">
			<div class="signup-hero__header">
				<a href="index.html" class="signup-hero__logo">
					<img src="assets/Investing101.png" alt="Investing101" style="height: 40px; width: auto; border-radius: 6px; margin-right: 10px;">
					<span>Investing101</span>
				</a>
				<p class="signup-hero__tagline">Join thousands of investors building wealth through knowledge and smart decisions.</p>
			</div>
			<div class="signup-hero__features">
				<div class="signup-feature">
					<div class="signup-feature__icon">ðŸ“Š</div>
					<div class="signup-feature__text">
						<h4>Market Simulator</h4>
						<p>Practice trading with real market data without risking real money.</p>
					</div>
				</div>
				<div class="signup-feature">
					<div class="signup-feature__icon">ðŸŽ“</div>
					<div class="signup-feature__text">
						<h4>Interactive Lessons</h4>
						<p>Master investing fundamentals through bite-sized, actionable lessons.</p>
					</div>
				</div>
				<div class="signup-feature">
					<div class="signup-feature__icon">ðŸ”§</div>
					<div class="signup-feature__text">
						<h4>Pro Calculators</h4>
						<p>Access 25+ financial calculators for retirement, risk, and portfolio analysis.</p>
					</div>
				</div>
			</div>
		</aside>

		<main class="signup-form-box">
			<div class="signup-form-box__header">
				<h1>Create Your Account</h1>
				<p>Start your investing journey today</p>
			</div>
			
			<form id="signupForm" class="signup-form-box__form">
				<div class="signup-field">
					<label for="email">Email Address</label>
					<input type="email" id="email" name="email" placeholder="you@example.com" autocomplete="email" required>
				</div>
				<div class="signup-field">
					<label for="displayName">Display Name</label>
					<input type="text" id="displayName" name="displayName" placeholder="How should we call you?" autocomplete="name" required>
				</div>
				<div class="signup-field">
					<label for="password">Password</label>
					<input type="password" id="password" name="password" placeholder="At least 6 characters" autocomplete="new-password" required>
				</div>
				<div class="signup-terms">
					<input type="checkbox" id="terms" name="terms" required>
					<label for="terms">I agree to the <a href="/terms.html" target="_blank">Terms of Service</a> and <a href="/privacy.html" target="_blank">Privacy Policy</a></label>
				</div>
				<button class="signup-btn" type="submit">Create Account</button>
				<p id="signupStatus" aria-live="polite"></p>
			</form>
			
			<div class="signup-divider">
				<span>or sign up with</span>
			</div>
			
			<div class="signup-oauth">
				<button class="signup-oauth-btn" type="button" onclick="window.location.href='/auth/google'">
					<svg width="18" height="18" viewBox="0 0 18 18">
						<path fill="#EA4335" d="M9 7.2v3.6h5.1c-.2 1.2-.9 2.3-1.9 3l3.1 2.4c1.8-1.7 2.8-4.1 2.8-6.8 0-.7-.1-1.3-.2-1.9H9z"/>
						<path fill="#34A853" d="M4.3 10.7l-.7.5-2.5 1.9C2.8 15.9 5.7 17.7 9 17.7c2.4 0 4.4-.8 5.9-2.3l-3.1-2.4c-.8.5-1.8.8-2.8.8-2.1 0-3.8-1.4-4.4-3.2z"/>
						<path fill="#4285F4" d="M16.9 5.4l-3.1 2.4c-.4-1.1-1.2-2-2.3-2.5-.9-.4-1.8-.6-2.8-.6-3.3 0-6.2 1.8-7.7 4.5l3.2 2.4c.6-1.8 2.3-3.2 4.4-3.2 1 0 1.9.3 2.8.8.8.5 1.5 1.2 1.9 2.1l3.1-2.4z"/>
						<path fill="#FBBC05" d="M1.6 5.9l3.2 2.4c-.2.5-.3 1-.3 1.5s.1 1 .3 1.5l-3.2 2.4C.9 12.6.6 11.3.6 9.8c0-1.5.3-2.8 1-3.9z"/>
					</svg>
					Google
				</button>
				<button class="signup-oauth-btn" type="button" onclick="window.location.href='/auth/facebook'">
					<svg width="18" height="18" viewBox="0 0 24 24" fill="#1877f2">
						<path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
					</svg>
					Facebook
				</button>
			</div>
			
			<button type="button" class="signup-guest" onclick="continueAsGuest()">
				<span>ðŸš€ Continue as Guest</span>
			</button>
			
			<div class="signup-footer">
				<p>Already have an account? <a href="signin.html">Sign In</a></p>
			</div>
		</main>
	</div>
		</section>
	</main>
	
	<script>
		(function () {
			const form = document.getElementById('signupForm');
			const statusEl = document.getElementById('signupStatus');
			const submitBtn = form.querySelector('button[type="submit"]');

			function setStatus(message, state) {
				if (!statusEl) return;
				statusEl.textContent = message || '';
				statusEl.style.color = state === 'error' ? '#f87171' : state === 'success' ? '#86efac' : 'var(--text-muted)';
			}

			async function checkExistingSession() {
				try {
					const response = await fetch('/api/auth/me', { credentials: 'include' });
					if (!response.ok) return;
					const payload = await response.json();
					if (payload?.success) {
						window.location.href = '/profile.html';
					}
				} catch (error) {
					console.warn('Session check failed:', error);
				}
			}

			form.addEventListener('submit', async (event) => {
				event.preventDefault();
				const formData = new FormData(form);
				const email = String(formData.get('email') || '').trim();
				const displayName = String(formData.get('displayName') || '').trim();
				const password = String(formData.get('password') || '');
				const termsAccepted = formData.get('terms') === 'on';

				if (!email || !displayName || !password) {
					setStatus('All fields are required.', 'error');
					return;
				}

				if (!termsAccepted) {
					setStatus('You must agree to the Terms of Service.', 'error');
					return;
				}

				if (password.length < 6) {
					setStatus('Password must be at least 6 characters.', 'error');
					return;
				}

				setStatus('Creating your account...', 'info');
				submitBtn.disabled = true;

				try {
					const response = await fetch('/api/auth/signup', {
						method: 'POST',
						headers: {
							'Content-Type': 'application/json'
						},
						credentials: 'include',
						body: JSON.stringify({ email, displayName, password })
					});

					const payload = await response.json().catch(() => ({}));
					if (!response.ok || !payload?.success) {
						throw new Error(payload?.error || 'Unable to create account. Please try again.');
					}

					setStatus('Account created! Redirecting...', 'success');
					setTimeout(() => {
						window.location.href = '/profile.html';
					}, 500);
				} catch (error) {
					console.error('Sign up failed:', error);
					setStatus(error.message || 'Unable to create account right now.', 'error');
					submitBtn.disabled = false;
				}
			});

			checkExistingSession();
		})();

		// Guest mode functionality
		function continueAsGuest() {
			try {
				// Create a guest user ID
				const guestId = 'guest_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
				
				// Store guest session in localStorage
				const guestSession = {
					id: guestId,
					displayName: 'Guest User',
					email: null,
					isGuest: true,
					createdAt: new Date().toISOString(),
					portfolio: {
						totalValue: 10000, // Starting balance
						cash: 10000,
						holdings: []
					}
				};
				
				localStorage.setItem('inv101_guest_session', JSON.stringify(guestSession));
				localStorage.setItem('inv101_guest_mode', 'true');
				
				// Show a welcome message
				alert('Welcome! You\'re browsing as a guest. Your progress will be saved locally.\n\nCreate an account later to access your data across devices and unlock social features!');
				
				// Redirect to main page
				window.location.href = '/index.html';
			} catch (error) {
				console.error('Guest mode error:', error);
				alert('Unable to continue as guest. Please try again.');
			}
		}
	</script>
</body>
</html>

