<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Market Simulation · Investing101</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <script>
    if (localStorage.getItem('darkMode') === 'true') { document.documentElement.classList.add('dark-mode-loading'); }
  </script>
</head>
<body>
  <script>if (localStorage.getItem('darkMode') === 'true') { document.body.classList.add('dark-mode'); }
    if (localStorage.getItem('compactMode') === 'true') { document.body.classList.add('compact-mode'); }</script>
  <div class="app">
    <header class="app__header">
      <a class="link-button" href="index.html">← Sim/AI</a>
      <span>Market Simulation</span>
      <span class="chip">$10,000 virtual cash</span>
    </header>

    <main class="app__content">
      <section class="screen screen--active" aria-label="Market simulator">
        <div class="card card--summary">
          <h3>Build Your Practice Portfolio</h3>
          <p>Live prices stream from Google Finance in production. This prototype lets you simulate allocations, diversification, and cash management.</p>
        </div>

        <form class="card" id="orderForm">
          <label class="field">
            <span>Asset</span>
            <select id="assetSelect"></select>
          </label>
          <label class="field">
            <span>Share quantity</span>
            <input id="quantityInput" type="number" min="1" step="1" value="1" required>
          </label>
          <button class="btn btn--primary" type="submit">Place Order</button>
        </form>

        <article class="card">
          <h3>Portfolio Snapshot</h3>
          <p id="cashBalance">Cash remaining: $10,000.00</p>
          <div id="portfolioTable"></div>
        </article>

        <article class="card">
          <h3>Challenge Goals</h3>
          <ul class="bullet-list">
            <li>Allocate across at least three sectors.</li>
            <li>Keep cash above 5% to handle volatility.</li>
            <li>Beat the S&amp;P over a one month test period.</li>
          </ul>
        </article>
      </section>
    </main>
  </div>

  <script>
    const STARTING_CASH = 10000;
    const ASSETS = {
      INVX: { name: 'Invictus Energy', price: 48.12, sector: 'Energy' },
      GLX: { name: 'Glacier Logistics', price: 72.45, sector: 'Industrial' },
      QRT: { name: 'Quantum Retail Tech', price: 113.9, sector: 'Technology' },
      HLT: { name: 'HealthPlus Therapeutics', price: 36.05, sector: 'Healthcare' },
      CRX: { name: 'CryptoX Index', price: 8.24, sector: 'Crypto' },
      ETFX: { name: 'Global ETF Basket', price: 125.5, sector: 'ETF' }
    };

    const holdings = {};
    let cash = STARTING_CASH;

    const assetSelect = document.getElementById('assetSelect');
    const quantityInput = document.getElementById('quantityInput');
    const portfolioTable = document.getElementById('portfolioTable');
    const cashBalance = document.getElementById('cashBalance');

    function initAssets() {
      Object.entries(ASSETS).forEach(([ticker, asset]) => {
        const option = document.createElement('option');
        option.value = ticker;
        option.textContent = `${ticker} · ${asset.name} ($${asset.price.toFixed(2)})`;
        assetSelect.appendChild(option);
      });
    }

    function renderPortfolio() {
      const rows = Object.entries(holdings)
        .map(([ticker, quantity]) => {
          const asset = ASSETS[ticker];
          const positionValue = quantity * asset.price;
          return `
            <tr>
              <td>${ticker}</td>
              <td>${asset.name}</td>
              <td>${asset.sector}</td>
              <td>${quantity}</td>
              <td>$${asset.price.toFixed(2)}</td>
              <td>$${positionValue.toFixed(2)}</td>
            </tr>
          `;
        })
        .join('');

      const totalValue = Object.entries(holdings).reduce((sum, [ticker, quantity]) => {
        return sum + quantity * ASSETS[ticker].price;
      }, 0);

      portfolioTable.innerHTML = rows
        ? `
          <table class="comparison-table">
            <thead>
              <tr>
                <th>Ticker</th>
                <th>Name</th>
                <th>Sector</th>
                <th>Shares</th>
                <th>Price</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody>${rows}</tbody>
            <tfoot>
              <tr>
                <td colspan="5">Total portfolio value</td>
                <td>$${totalValue.toFixed(2)}</td>
              </tr>
            </tfoot>
          </table>
        `
        : '<p>No positions yet. Use your virtual cash to build a strategy.</p>';

      cashBalance.textContent = `Cash remaining: $${cash.toFixed(2)}`;
    }

    document.getElementById('orderForm').addEventListener('submit', (event) => {
      event.preventDefault();
      const ticker = assetSelect.value;
      const quantity = Number(quantityInput.value);
      if (!ticker || quantity <= 0) return;

      const asset = ASSETS[ticker];
      const cost = asset.price * quantity;
      if (cost > cash) {
        alert('Not enough virtual cash. Try lowering the quantity.');
        return;
      }

      holdings[ticker] = (holdings[ticker] || 0) + quantity;
      cash -= cost;
      renderPortfolio();
      quantityInput.value = '1';
    });

    initAssets();
    renderPortfolio();
  </script>

  <nav class="tabbar" aria-label="Primary navigation">
    <a class="tabbar__btn" href="index.html">
      <svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M3 10.5L12 3l9 7.5" />
        <path d="M5 10.5V21h14V10.5" />
        <path d="M9 21v-6h6v6" />
      </svg>
      <span>Main</span>
    </a>
    <a class="tabbar__btn tabbar__btn--active" href="simulator.html">
      <svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <circle cx="12" cy="12" r="9" />
        <circle cx="12" cy="12" r="3" />
        <path d="M12 3v3" />
        <path d="M12 18v3" />
        <path d="M3 12h3" />
        <path d="M18 12h3" />
      </svg>
      <span>Sim/AI</span>
    </a>
    <a class="tabbar__btn" href="lessons.html">
      <svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M4 19V5l8-3 8 3v14l-8 3-8-3z" />
        <path d="M4 12l8 3 8-3" />
        <path d="M12 5v10" />
      </svg>
      <span>Lessons</span>
    </a>
    <a class="tabbar__btn" href="calculators.html">
      <svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <rect x="3" y="4" width="18" height="16" rx="2" />
        <path d="M7 8h10" />
        <path d="M7 12h10" />
        <path d="M7 16h3" />
        <path d="M14 16h3" />
      </svg>
      <span>Calc</span>
    </a>
    <a class="tabbar__btn" href="profile.html">
      <svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <circle cx="12" cy="8" r="4" />
        <path d="M4 20c0-4 4-6 8-6s8 2 8 6" />
      </svg>
      <span>Profile</span>
    </a>
  </nav>
</body>
</html>


