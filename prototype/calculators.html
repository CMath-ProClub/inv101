<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Interactive Calculators Â· Investing101</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="dist/main.css">
  <script>
    (function(){
      try {
        var supported = ['light','dark','ultradark','emerald-trust','quantum-violet','copper-balance','regal-portfolio','carbon-edge'];
        var alias = { sepia: 'copper-balance' };
        var stored = localStorage.getItem('inv101_theme');
        var legacy = localStorage.getItem('darkMode') === 'true' ? 'dark' : null;
        var theme = (stored || legacy || 'light').toLowerCase();
        if (theme.indexOf('theme-') === 0) theme = theme.slice(6);
        if (alias[theme]) theme = alias[theme];
        if (supported.indexOf(theme) === -1) theme = 'light';
        var root = document.documentElement;
        var purge = ['dark-mode','theme-sepia'];
        supported.forEach(function(id){ purge.push('theme-' + id); });
        purge.forEach(function(cls){ root.classList.remove(cls); });
        root.classList.add('theme-' + theme);
      } catch (e) {}
    })();
  </script>
</head>
<body class="bg-white dark:bg-slate-950">
  <script src="global-ui.js"></script>
  <div class="flex min-h-screen flex-col">
    <!-- Desktop Sidebar Navigation (visible on desktop only) -->
    <aside class="sidebar">
      <a href="index.html" class="sidebar__logo" aria-label="Return to main page" style="text-decoration: none;">
        <img src="assets/Investing101.png" alt="Investing 101">
      </a>
      <nav class="sidebar__nav" aria-label="Main navigation">
        <a href="index.html" class="sidebar__btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 10.5L12 3l9 7.5" />
            <path d="M5 10.5V21h14V10.5" />
            <path d="M9 21v-6h6v6" />
          </svg>
          <span>Main</span>
        </a>
        <a href="simulator.html" class="sidebar__btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="9" />
            <circle cx="12" cy="12" r="3" />
            <path d="M12 3v3" />
            <path d="M12 18v3" />
            <path d="M3 12h3" />
            <path d="M18 12h3" />
          </svg>
          <span>Simulator / AI</span>
        </a>
        <a href="lessons.html" class="sidebar__btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 19V5l8-3 8 3v14l-8 3-8-3z" />
            <path d="M4 12l8 3 8-3" />
            <path d="M12 5v10" />
          </svg>
          <span>Lessons</span>
        </a>
        <a href="calculators.html" class="sidebar__btn sidebar__btn--active">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="4" width="18" height="16" rx="2" />
            <path d="M7 8h10" />
            <path d="M7 12h10" />
            <path d="M7 16h3" />
            <path d="M14 16h3" />
          </svg>
          <span>Calculators</span>
        </a>
        <a href="profile.html" class="sidebar__btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="8" r="4" />
            <path d="M4 20c0-4 4-6 8-6s8 2 8 6" />
          </svg>
          <span>Profile</span>
        </a>
      </nav>
    </aside>
    <button class="sidebar-toggle" onclick="toggleSidebar()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="icon">
        <path d="M15 18l-6-6 6-6" />
      </svg>
    </button>

    <header class="global-header">
      <div class="brand">
        <span>Calculator Suite</span>
      </div>
      <div class="header-fill">
        <div class="search">
          <input id="headerCalculatorSearch" type="search" placeholder="Search calculators (e.g., compound interest, Kelly, P/E ratio)..." aria-label="Search calculators">
        </div>
      </div>
      <div class="actions">
        <button class="btn btn--secondary" onclick="window.location.href='index.html'">â† Back</button>
      </div>
    </header>

    <main class="app__content calculators-layout">
      <section class="calculators-hero" aria-label="Calculator suite overview">
        <div>
          <span class="calculators-chip">Trusted Toolkit</span>
          <h1>Find the right calculator in seconds.</h1>
          <p>
            Whether youâ€™re validating a trade, planning retirement, or checking tax impact, the Invest101 calculator suite keeps inputs organized and outputs easy to understand.
          </p>
        </div>
        <div class="calculator-search">
          <label for="calculatorSearch" class="sr-only">Search calculators</label>
          <input id="calculatorSearch" type="search" placeholder="Search for a calculator (e.g. compounding, CAPM, staking)" aria-label="Search calculators">
        </div>
      </section>

      <section class="calculator-grid" id="calculatorGrid" aria-label="Calculator shortcuts">
        <button onclick="window.location.href='calc-core.html'" class="calculator-card" data-calculator="core compounding growth roi networth" data-category="Core">
          <span class="calculator-icon">ðŸ’°</span>
          <h2>Core</h2>
          <p>Compound interest, future value, and ROI drills that model the power of time.</p>
          <span class="calculator-meta">Includes compounding, annualized returns, ROI</span>
        </button>
        <button onclick="window.location.href='calc-risk.html'" class="calculator-card" data-calculator="risk kelly drawdown var volatility" data-category="Risk">
          <span class="calculator-icon">âš ï¸</span>
          <h2>Risk</h2>
          <p>Position sizing, Kelly criterion, and value-at-risk calculators to keep drawdowns contained.</p>
          <span class="calculator-meta">Includes Kelly, VaR, position sizing</span>
        </button>
        <button onclick="window.location.href='calc-stock.html'" class="calculator-card" data-calculator="stock valuation pe dividend intrinsic" data-category="Stock">
          <span class="calculator-icon">ðŸ“ˆ</span>
          <h2>Stock</h2>
          <p>Valuation helpers covering P/E, dividend yield, and growth expectations per ticker.</p>
          <span class="calculator-meta">Includes P/E, dividend yield, intrinsic value</span>
        </button>
        <button onclick="window.location.href='calc-asset.html'" class="calculator-card" data-calculator="asset allocation rebalance mpt diversification" data-category="Asset">
          <span class="calculator-icon">ðŸ¦</span>
          <h2>Asset</h2>
          <p>Map portfolio weights, rebalance triggers, and mean-variance mixes to stay on target.</p>
          <span class="calculator-meta">Includes allocation, rebalancer, factor mix</span>
        </button>
        <button onclick="window.location.href='calc-retire.html'" class="calculator-card" data-calculator="retire retirement savings 401k fire" data-category="Retire">
          <span class="calculator-icon">ðŸ–ï¸</span>
          <h2>Retire</h2>
          <p>Estimate retirement runway, 401(k) contributions, and savings milestones.</p>
          <span class="calculator-meta">Includes savings runway, 401(k) planner</span>
        </button>
        <button onclick="window.location.href='calc-tax.html'" class="calculator-card" data-calculator="tax capital gains net profit after tax" data-category="Tax">
          <span class="calculator-icon">ðŸ“‹</span>
          <h2>Tax</h2>
          <p>Work through capital gains, after-tax profit, and planning scenarios with clarity.</p>
          <span class="calculator-meta">Includes capital gains, net profit</span>
        </button>
        <button onclick="window.location.href='calc-crypto.html'" class="calculator-card" data-calculator="crypto staking mining yield tokens" data-category="Crypto">
          <span class="calculator-icon">â‚¿</span>
          <h2>Crypto</h2>
          <p>Projection tools for staking, mining, and token growth anchored to realistic assumptions.</p>
          <span class="calculator-meta">Includes mining breakeven, staking yield</span>
        </button>
      </section>
    </main>
  </div>

  <script>
    const calculatorSearch = document.getElementById('calculatorSearch');
    const headerCalculatorSearch = document.getElementById('headerCalculatorSearch');
    const calculatorGrid = document.getElementById('calculatorGrid');
    
    // Calculator data for autofill
    const calculators = [
      { name: 'Core', url: 'calc-core.html', keywords: ['core', 'compound', 'compounding', 'growth', 'roi', 'return on investment', 'networth'] },
      { name: 'Risk', url: 'calc-risk.html', keywords: ['risk', 'kelly', 'kelly criterion', 'drawdown', 'var', 'value at risk', 'volatility'] },
      { name: 'Stock', url: 'calc-stock.html', keywords: ['stock', 'valuation', 'pe', 'p/e ratio', 'dividend', 'intrinsic', 'intrinsic value'] },
      { name: 'Asset', url: 'calc-asset.html', keywords: ['asset', 'allocation', 'rebalance', 'mpt', 'modern portfolio theory', 'diversification'] },
      { name: 'Retire', url: 'calc-retire.html', keywords: ['retire', 'retirement', 'savings', '401k', 'fire', 'financial independence'] },
      { name: 'Tax', url: 'calc-tax.html', keywords: ['tax', 'capital gains', 'net profit', 'after tax'] },
      { name: 'Crypto', url: 'calc-crypto.html', keywords: ['crypto', 'cryptocurrency', 'staking', 'mining', 'yield', 'tokens', 'bitcoin'] }
    ];

    let currentSuggestionIndex = -1;
    let suggestions = [];

    function createSuggestionDropdown() {
      const dropdown = document.createElement('div');
      dropdown.id = 'calculatorSuggestions';
      dropdown.className = 'calculator-suggestions';
      dropdown.style.cssText = `
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--bg-card);
        border: 1px solid rgba(31, 42, 55, 0.12);
        border-radius: 12px;
        margin-top: 8px;
        box-shadow: 0 8px 24px rgba(0,0,0,0.12);
        max-height: 280px;
        overflow-y: auto;
        z-index: 100;
        display: none;
      `;
      return dropdown;
    }

    const mainSearchContainer = calculatorSearch?.parentElement;
    const headerSearchContainer = headerCalculatorSearch?.parentElement;
    
    if (mainSearchContainer) {
      mainSearchContainer.style.position = 'relative';
      const dropdown = createSuggestionDropdown();
      mainSearchContainer.appendChild(dropdown);
    }

    function showSuggestions(query, dropdown, inputElement) {
      if (!query || query.length < 2) {
        dropdown.style.display = 'none';
        return;
      }

      const normalized = query.toLowerCase();
      suggestions = calculators.filter(calc => 
        calc.name.toLowerCase().includes(normalized) || 
        calc.keywords.some(kw => kw.includes(normalized))
      );

      if (suggestions.length === 0) {
        dropdown.style.display = 'none';
        return;
      }

      dropdown.innerHTML = suggestions.map((calc, index) => `
        <div class="suggestion-item" data-index="${index}" data-url="${calc.url}">
          <strong>${calc.name}</strong>
          <span style="font-size: 0.85rem; color: var(--text-muted); margin-left: 8px;">Calculator</span>
        </div>
      `).join('');

      dropdown.style.display = 'block';
      currentSuggestionIndex = -1;

      // Add click handlers
      dropdown.querySelectorAll('.suggestion-item').forEach(item => {
        item.addEventListener('click', () => {
          window.location.href = item.dataset.url;
        });
      });
    }

    function hideSuggestions(dropdown) {
      setTimeout(() => {
        dropdown.style.display = 'none';
        currentSuggestionIndex = -1;
      }, 200);
    }

    function filterCalculatorCards(query) {
      if (!calculatorGrid) return;
      const normalized = query.trim().toLowerCase();
      const cards = Array.from(calculatorGrid.querySelectorAll('.calculator-card'));
      cards.forEach((card) => {
        const haystack = `${card.dataset.calculator || ''} ${(card.querySelector('h2')?.textContent || '')} ${(card.querySelector('p')?.textContent || '')}`.toLowerCase();
        const matches = !normalized || haystack.includes(normalized);
        card.classList.toggle('is-hidden', !matches);
      });
      const visibleCards = cards.filter((card) => !card.classList.contains('is-hidden'));
      calculatorGrid.classList.toggle('is-empty', visibleCards.length === 0);
    }

    // Main search input handler
    if (calculatorSearch) {
      const dropdown = document.getElementById('calculatorSuggestions');
      
      calculatorSearch.addEventListener('input', (event) => {
        const value = (event.target?.value || '').toString();
        if (headerCalculatorSearch) headerCalculatorSearch.value = value;
        filterCalculatorCards(value);
        showSuggestions(value, dropdown, calculatorSearch);
      });

      calculatorSearch.addEventListener('keydown', (event) => {
        const dropdown = document.getElementById('calculatorSuggestions');
        const items = dropdown.querySelectorAll('.suggestion-item');

        if (event.key === 'ArrowDown') {
          event.preventDefault();
          currentSuggestionIndex = Math.min(currentSuggestionIndex + 1, items.length - 1);
          updateSuggestionHighlight(items);
        } else if (event.key === 'ArrowUp') {
          event.preventDefault();
          currentSuggestionIndex = Math.max(currentSuggestionIndex - 1, -1);
          updateSuggestionHighlight(items);
        } else if (event.key === 'Enter' && currentSuggestionIndex >= 0) {
          event.preventDefault();
          const selectedItem = items[currentSuggestionIndex];
          if (selectedItem) {
            window.location.href = selectedItem.dataset.url;
          }
        } else if (event.key === 'Escape') {
          dropdown.style.display = 'none';
        }
      });

      calculatorSearch.addEventListener('blur', () => {
        hideSuggestions(dropdown);
      });
    }

    // Header search input handler
    if (headerCalculatorSearch) {
      headerCalculatorSearch.addEventListener('input', (event) => {
        const value = (event.target?.value || '').toString();
        if (calculatorSearch) calculatorSearch.value = value;
        filterCalculatorCards(value);
      });
    }

    function updateSuggestionHighlight(items) {
      items.forEach((item, index) => {
        if (index === currentSuggestionIndex) {
          item.style.background = 'var(--bg-hover)';
        } else {
          item.style.background = 'transparent';
        }
      });
    }

    filterCalculatorCards('');
  </script>

  <style>
    .suggestion-item {
      padding: 12px 16px;
      cursor: pointer;
      transition: background 150ms;
      border-bottom: 1px solid rgba(31, 42, 55, 0.06);
    }
    .suggestion-item:last-child {
      border-bottom: none;
    }
    .suggestion-item:hover {
      background: var(--bg-hover);
    }
  </style>

  <nav class="fixed bottom-0 left-0 right-0 flex border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900" aria-label="Primary navigation">
    <a class="flex-1 flex flex-col items-center justify-center gap-1 border-r border-slate-200 px-2 py-3 text-sm font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-primary-green dark:border-slate-800 dark:text-slate-300 dark:hover:bg-slate-900 dark:hover:text-primary-green" href="index.html">
      <svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M3 10.5L12 3l9 7.5" />
        <path d="M5 10.5V21h14V10.5" />
        <path d="M9 21v-6h6v6" />
      </svg>
      <span>Main</span>
    </a>
    <a class="flex-1 flex flex-col items-center justify-center gap-1 border-r border-slate-200 px-2 py-3 text-sm font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-primary-green dark:border-slate-800 dark:text-slate-300 dark:hover:bg-slate-900 dark:hover:text-primary-green" href="simulator.html">
      <svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <circle cx="12" cy="12" r="9" />
        <circle cx="12" cy="12" r="3" />
        <path d="M12 3v3" />
        <path d="M12 18v3" />
        <path d="M3 12h3" />
        <path d="M18 12h3" />
      </svg>
      <span>Sim/AI</span>
    </a>
    <a class="flex-1 flex flex-col items-center justify-center gap-1 border-r border-slate-200 px-2 py-3 text-sm font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-primary-green dark:border-slate-800 dark:text-slate-300 dark:hover:bg-slate-900 dark:hover:text-primary-green" href="lessons.html">
      <svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M4 19V5l8-3 8 3v14l-8 3-8-3z" />
        <path d="M4 12l8 3 8-3" />
        <path d="M12 5v10" />
      </svg>
      <span>Lessons</span>
    </a>
    <a class="flex-1 flex flex-col items-center justify-center gap-1 border-r border-slate-200 px-2 py-3 text-sm font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-primary-green dark:border-slate-800 dark:text-slate-300 dark:hover:bg-slate-900 dark:hover:text-primary-green tabbar__btn--active" href="calculators.html">
      <svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <rect x="3" y="4" width="18" height="16" rx="2" />
        <path d="M7 8h10" />
        <path d="M7 12h10" />
        <path d="M7 16h3" />
        <path d="M14 16h3" />
      </svg>
      <span>Calc</span>
    </a>
    <a class="flex-1 flex flex-col items-center justify-center gap-1 border-r border-slate-200 px-2 py-3 text-sm font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-primary-green dark:border-slate-800 dark:text-slate-300 dark:hover:bg-slate-900 dark:hover:text-primary-green" href="profile.html">
      <svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <circle cx="12" cy="8" r="4" />
        <path d="M4 20c0-4 4-6 8-6s8 2 8 6" />
      </svg>
      <span>Profile</span>
    </a>
  </nav>

  <script src="device-detection.js"></script>
</body>
</html>



