<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Interactive Calculators ¬∑ Investing101</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <script>
    (function(){
      try {
        var supported = ['light','dark','ultradark','emerald-trust','quantum-violet','copper-balance','regal-portfolio','carbon-edge'];
        var alias = { sepia: 'copper-balance' };
        var stored = localStorage.getItem('inv101_theme');
        var legacy = localStorage.getItem('darkMode') === 'true' ? 'dark' : null;
        var theme = (stored || legacy || 'light').toLowerCase();
        if (theme.indexOf('theme-') === 0) theme = theme.slice(6);
        if (alias[theme]) theme = alias[theme];
        if (supported.indexOf(theme) === -1) theme = 'light';
        var root = document.documentElement;
        var purge = ['dark-mode','theme-sepia'];
        supported.forEach(function(id){ purge.push('theme-' + id); });
        purge.forEach(function(cls){ root.classList.remove(cls); });
        root.classList.add('theme-' + theme);
      } catch (e) {}
    })();
  </script>
</head>
<body>
  <script src="global-ui.js"></script>
  <div class="app">
    <!-- Desktop Sidebar Navigation (visible on desktop only) -->
    <aside class="sidebar">
      <a href="index.html" class="sidebar__logo" aria-label="Return to main page" style="text-decoration: none;">
        <img src="assets/Investing101.png" alt="Investing 101">
      </a>
      <nav class="sidebar__nav" aria-label="Main navigation">
        <a href="index.html" class="sidebar__btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 10.5L12 3l9 7.5" />
            <path d="M5 10.5V21h14V10.5" />
            <path d="M9 21v-6h6v6" />
          </svg>
          <span>Main</span>
        </a>
        <a href="simulator.html" class="sidebar__btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="9" />
            <circle cx="12" cy="12" r="3" />
            <path d="M12 3v3" />
            <path d="M12 18v3" />
            <path d="M3 12h3" />
            <path d="M18 12h3" />
          </svg>
          <span>Simulator / AI</span>
        </a>
        <a href="lessons.html" class="sidebar__btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 19V5l8-3 8 3v14l-8 3-8-3z" />
            <path d="M4 12l8 3 8-3" />
            <path d="M12 5v10" />
          </svg>
          <span>Lessons</span>
        </a>
        <a href="calculators.html" class="sidebar__btn sidebar__btn--active">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="4" width="18" height="16" rx="2" />
            <path d="M7 8h10" />
            <path d="M7 12h10" />
            <path d="M7 16h3" />
            <path d="M14 16h3" />
          </svg>
          <span>Calculators</span>
        </a>
        <a href="profile.html" class="sidebar__btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="8" r="4" />
            <path d="M4 20c0-4 4-6 8-6s8 2 8 6" />
          </svg>
          <span>Profile</span>
        </a>
      </nav>
    </aside>

    <header class="app__header">
      <a class="link-button" href="index.html">‚Üê Calc</a>
      <span>Calculator Suite</span>
      <span class="chip">CORE ¬∑ RISK ¬∑ STOCK ¬∑ ASSET ¬∑ RETIRE ¬∑ TAX ¬∑ CRYPTO</span>
    </header>

    <main class="app__content calculators-layout">
      <section class="calculators-hero" aria-label="Calculator suite overview">
        <div>
          <span class="calculators-chip">Trusted Toolkit</span>
          <h1>Find the right calculator in seconds.</h1>
          <p>
            Whether you‚Äôre validating a trade, planning retirement, or checking tax impact, the Invest101 calculator suite keeps inputs organized and outputs easy to understand.
          </p>
        </div>
        <div class="calculator-search">
          <label for="calculatorSearch" class="sr-only">Search calculators</label>
          <input id="calculatorSearch" type="search" placeholder="Search for a calculator (e.g. compounding, CAPM, staking)" aria-label="Search calculators">
        </div>
      </section>

      <section class="calculator-grid" id="calculatorGrid" aria-label="Calculator shortcuts">
        <a href="calc-core.html" class="calculator-card" data-calculator="core compounding growth roi networth" data-category="Core">
          <span class="calculator-icon">üí∞</span>
          <h2>Core</h2>
          <p>Compound interest, future value, and ROI drills that model the power of time.</p>
          <span class="calculator-meta">Includes compounding, annualized returns, ROI</span>
        </a>
        <a href="calc-risk.html" class="calculator-card" data-calculator="risk kelly drawdown var volatility" data-category="Risk">
          <span class="calculator-icon">‚ö†Ô∏è</span>
          <h2>Risk</h2>
          <p>Position sizing, Kelly criterion, and value-at-risk calculators to keep drawdowns contained.</p>
          <span class="calculator-meta">Includes Kelly, VaR, position sizing</span>
        </a>
        <a href="calc-stock.html" class="calculator-card" data-calculator="stock valuation pe dividend intrinsic" data-category="Stock">
          <span class="calculator-icon">üìà</span>
          <h2>Stock</h2>
          <p>Valuation helpers covering P/E, dividend yield, and growth expectations per ticker.</p>
          <span class="calculator-meta">Includes P/E, dividend yield, intrinsic value</span>
        </a>
        <a href="calc-asset.html" class="calculator-card" data-calculator="asset allocation rebalance mpt diversification" data-category="Asset">
          <span class="calculator-icon">üè¶</span>
          <h2>Asset</h2>
          <p>Map portfolio weights, rebalance triggers, and mean-variance mixes to stay on target.</p>
          <span class="calculator-meta">Includes allocation, rebalancer, factor mix</span>
        </a>
        <a href="calc-retire.html" class="calculator-card" data-calculator="retire retirement savings 401k fire" data-category="Retire">
          <span class="calculator-icon">üèñÔ∏è</span>
          <h2>Retire</h2>
          <p>Estimate retirement runway, 401(k) contributions, and savings milestones.</p>
          <span class="calculator-meta">Includes savings runway, 401(k) planner</span>
        </a>
        <a href="calc-tax.html" class="calculator-card" data-calculator="tax capital gains net profit after tax" data-category="Tax">
          <span class="calculator-icon">üìã</span>
          <h2>Tax</h2>
          <p>Work through capital gains, after-tax profit, and planning scenarios with clarity.</p>
          <span class="calculator-meta">Includes capital gains, net profit</span>
        </a>
        <a href="calc-crypto.html" class="calculator-card" data-calculator="crypto staking mining yield tokens" data-category="Crypto">
          <span class="calculator-icon">‚Çø</span>
          <h2>Crypto</h2>
          <p>Projection tools for staking, mining, and token growth anchored to realistic assumptions.</p>
          <span class="calculator-meta">Includes mining breakeven, staking yield</span>
        </a>
      </section>

      <section class="calculator-extras">
        <article class="calculator-guide">
          <h3>How to use the toolkit</h3>
          <ol>
            <li>Search above or browse categories to find the calculator you need.</li>
            <li>Adjust sliders and inputs‚Äîresults update instantly with contextual notes.</li>
            <li>Download your scenario or copy a share link to send to collaborators.</li>
          </ol>
        </article>
        <article class="calculator-guide">
          <h3>Quick suggestions</h3>
          <ul>
            <li><strong>Planning a rebalance?</strong> Try Asset ‚Üí Allocation Rebalancer.</li>
            <li><strong>Stress-testing trades?</strong> Risk ‚Üí Value-at-Risk and Position Size.</li>
            <li><strong>Considering options?</strong> Stock ‚Üí Implied volatility helper (coming soon).</li>
          </ul>
        </article>
      </section>

      <section class="calculator-lab" aria-label="Interactive calculator">
        <div class="calculator-lab__controls">
          <label for="calculatorSelect">Calculator</label>
          <select id="calculatorSelect" aria-label="Select calculator"></select>
          <p class="calculator-lab__hint">Pick a calculator to configure inputs. Results update instantly below.</p>
        </div>
        <form id="calculatorForm" class="calculator-form" aria-label="Calculator inputs"></form>
        <output id="calculatorResult" class="calculator-result" aria-live="polite">Choose a calculator to get started.</output>
      </section>
    </main>
  </div>

  <script>
    const CALCULATORS = {
      'compound-interest': {
        name: 'Compound Interest (CORE)',
        fields: [
          { id: 'principal', label: 'Principal ($)', type: 'number', min: 0, step: '0.01' },
          { id: 'rate', label: 'Annual Rate (%)', type: 'number', min: 0, step: '0.01' },
          { id: 'times', label: 'Compounds per year', type: 'number', min: 1, step: '1' },
          { id: 'years', label: 'Years', type: 'number', min: 0, step: '0.1' }
        ],
        compute: (values) => {
          const P = values.principal;
          const r = values.rate / 100;
          const n = values.times;
          const t = values.years;
          const A = P * Math.pow(1 + r / n, n * t);
          return `Future value: $${A.toFixed(2)} (Growth: $${(A - P).toFixed(2)})`;
        }
      },
      'kelly-criterion': {
        name: 'Kelly Criterion (RISK)',
        fields: [
          { id: 'winProb', label: 'Win Probability (%)', type: 'number', min: 0, max: 100, step: '0.1' },
          { id: 'winLossRatio', label: 'Win/Loss Ratio', type: 'number', min: 0, step: '0.01' }
        ],
        compute: (values) => {
          const p = values.winProb / 100;
          const b = values.winLossRatio;
          if (b === 0) return 'Win/Loss ratio must be greater than 0.';
          const fraction = Math.max(0, Math.min(1, (p * (b + 1) - 1) / b));
          return `Optimal capital fraction: ${(fraction * 100).toFixed(1)}%`;
        }
      },
      'pe-ratio': {
        name: 'P/E Ratio (STOCK)',
        fields: [
          { id: 'price', label: 'Share Price ($)', type: 'number', min: 0, step: '0.01' },
          { id: 'eps', label: 'Earnings per Share ($)', type: 'number', min: 0, step: '0.01' }
        ],
        compute: (values) => {
          if (!values.eps) return 'EPS must be greater than 0.';
          const ratio = values.price / values.eps;
          return `P/E ratio: ${ratio.toFixed(2)}`;
        }
      },
      'asset-rebalance': {
        name: 'Asset Allocation Rebalancer (ASSET)',
        fields: [
          { id: 'currentEquity', label: 'Current Equity %', type: 'number', min: 0, max: 100, step: '0.1' },
          { id: 'targetEquity', label: 'Target Equity %', type: 'number', min: 0, max: 100, step: '0.1' },
          { id: 'portfolioValue', label: 'Portfolio Value ($)', type: 'number', min: 0, step: '0.01' }
        ],
        compute: (values) => {
          const diff = (values.targetEquity - values.currentEquity) / 100;
          const amount = values.portfolioValue * diff;
          if (Math.abs(amount) < 1) return 'You are on target ‚Äî no rebalance required.';
          return amount > 0
            ? `Buy $${Math.abs(amount).toFixed(2)} of equity.`
            : `Sell $${Math.abs(amount).toFixed(2)} of equity.`;
        }
      },
      'retirement-savings': {
        name: 'Retirement Savings (RETIRE)',
        fields: [
          { id: 'currentSavings', label: 'Current Savings ($)', type: 'number', min: 0, step: '0.01' },
          { id: 'annualContribution', label: 'Annual Contribution ($)', type: 'number', min: 0, step: '0.01' },
          { id: 'yearsToRetire', label: 'Years to Retirement', type: 'number', min: 0, step: '1' },
          { id: 'expectedReturn', label: 'Expected Annual Return (%)', type: 'number', min: 0, step: '0.1' }
        ],
        compute: (values) => {
          const P = values.currentSavings;
          const c = values.annualContribution;
          const r = values.expectedReturn / 100;
          const n = values.yearsToRetire;
          if (r === 0) return `Estimated retirement value: $${(P + c * n).toFixed(2)}`;
          const futurePrincipal = P * Math.pow(1 + r, n);
          const futureContrib = c * ((Math.pow(1 + r, n) - 1) / r);
          const total = futurePrincipal + futureContrib;
          return `Estimated retirement value: $${total.toFixed(2)}`;
        }
      },
      'capital-gains': {
        name: 'Capital Gains (TAX)',
        fields: [
          { id: 'costBasis', label: 'Cost Basis ($)', type: 'number', min: 0, step: '0.01' },
          { id: 'salePrice', label: 'Sale Price ($)', type: 'number', min: 0, step: '0.01' },
          { id: 'taxRate', label: 'Capital Gains Tax Rate (%)', type: 'number', min: 0, step: '0.1' }
        ],
        compute: (values) => {
          const gain = values.salePrice - values.costBasis;
          const tax = gain > 0 ? gain * (values.taxRate / 100) : 0;
          return `Gain: $${gain.toFixed(2)} ¬∑ Estimated tax: $${tax.toFixed(2)}`;
        }
      },
      'crypto-staking': {
        name: 'Crypto Staking Yield (CRYPTO)',
        fields: [
          { id: 'stakeAmount', label: 'Stake Amount (tokens)', type: 'number', min: 0, step: '0.0001' },
          { id: 'tokenPrice', label: 'Token Price ($)', type: 'number', min: 0, step: '0.01' },
          { id: 'apy', label: 'APY (%)', type: 'number', min: 0, step: '0.1' }
        ],
        compute: (values) => {
          const value = values.stakeAmount * values.tokenPrice;
          const reward = value * (values.apy / 100);
          return `Estimated annual reward: $${reward.toFixed(2)}`;
        }
      }
    };

  const calculatorSelect = document.getElementById('calculatorSelect');
  const calculatorForm = document.getElementById('calculatorForm');
  const calculatorResult = document.getElementById('calculatorResult');
  const calculatorSearch = document.getElementById('calculatorSearch');
    const calculatorGrid = document.getElementById('calculatorGrid');    

    function filterCalculatorCards(query) {
      if (!calculatorGrid) return;
      const normalized = query.trim().toLowerCase();
      const cards = Array.from(calculatorGrid.querySelectorAll('.calculator-card'));
      cards.forEach((card) => {
        const haystack = `${card.dataset.calculator || ''} ${(card.querySelector('h2')?.textContent || '')} ${(card.querySelector('p')?.textContent || '')}`.toLowerCase();
        const matches = !normalized || haystack.includes(normalized);
        card.classList.toggle('is-hidden', !matches);
      });
      const visibleCards = cards.filter((card) => !card.classList.contains('is-hidden'));
      calculatorGrid.classList.toggle('is-empty', visibleCards.length === 0);
    }

    calculatorSearch?.addEventListener('input', (event) => {
      const value = (event.target?.value || '').toString();
      filterCalculatorCards(value);
    });

    function initCalculatorOptions() {
      Object.entries(CALCULATORS).forEach(([id, config]) => {
        const option = document.createElement('option');
        option.value = id;
        option.textContent = config.name;
        calculatorSelect.appendChild(option);
      });
      calculatorSelect.value = 'compound-interest';
    }

    function renderCalculatorForm(calculatorId) {
      const config = CALCULATORS[calculatorId];
      if (!config) return;

      calculatorForm.innerHTML = config.fields
        .map((field) => {
          const min = field.min !== undefined ? `min="${field.min}"` : '';
          const max = field.max !== undefined ? `max="${field.max}"` : '';
          const step = field.step ? `step="${field.step}"` : '';
          return `
            <label class="field">
              <span>${field.label}</span>
              <input type="${field.type}" id="${field.id}" name="${field.id}" ${min} ${max} ${step} required>
            </label>
          `;
        })
        .join('');

      calculatorForm.insertAdjacentHTML(
        'beforeend',
        '<button class="btn btn--primary" type="submit">Calculate</button>'
      );

      calculatorResult.textContent = '';
    }

    function handleSubmit(event) {
      event.preventDefault();
      const calculatorId = calculatorSelect.value;
      const config = CALCULATORS[calculatorId];
      if (!config) return;

      const formData = new FormData(calculatorForm);
      const values = {};
      config.fields.forEach((field) => {
        values[field.id] = Number(formData.get(field.id));
      });

      const result = config.compute(values);
      calculatorResult.textContent = result;
    }

    calculatorSelect.addEventListener('change', (event) => {
      renderCalculatorForm(event.target.value);
    });

    calculatorForm.addEventListener('submit', handleSubmit);

    initCalculatorOptions();
    renderCalculatorForm('compound-interest');
    filterCalculatorCards('');
  </script>

  <nav class="tabbar" aria-label="Primary navigation">
    <a class="tabbar__btn" href="index.html">
      <svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M3 10.5L12 3l9 7.5" />
        <path d="M5 10.5V21h14V10.5" />
        <path d="M9 21v-6h6v6" />
      </svg>
      <span>Main</span>
    </a>
    <a class="tabbar__btn" href="simulator.html">
      <svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <circle cx="12" cy="12" r="9" />
        <circle cx="12" cy="12" r="3" />
        <path d="M12 3v3" />
        <path d="M12 18v3" />
        <path d="M3 12h3" />
        <path d="M18 12h3" />
      </svg>
      <span>Sim/AI</span>
    </a>
    <a class="tabbar__btn" href="lessons.html">
      <svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M4 19V5l8-3 8 3v14l-8 3-8-3z" />
        <path d="M4 12l8 3 8-3" />
        <path d="M12 5v10" />
      </svg>
      <span>Lessons</span>
    </a>
    <a class="tabbar__btn tabbar__btn--active" href="calculators.html">
      <svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <rect x="3" y="4" width="18" height="16" rx="2" />
        <path d="M7 8h10" />
        <path d="M7 12h10" />
        <path d="M7 16h3" />
        <path d="M14 16h3" />
      </svg>
      <span>Calc</span>
    </a>
    <a class="tabbar__btn" href="profile.html">
      <svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <circle cx="12" cy="8" r="4" />
        <path d="M4 20c0-4 4-6 8-6s8 2 8 6" />
      </svg>
      <span>Profile</span>
    </a>
  </nav>

  <script src="device-detection.js"></script>
</body>
</html>


