<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Risk/Reward Ratio Calculator</title>
  <link rel="stylesheet" href="styles.css">
  <script src="device-detection.js"></script>
  <script>
    (function(){
      try {
        var supported = ['light','dark','ultradark','emerald-trust','quantum-violet','copper-balance','regal-portfolio','carbon-edge'];
        var alias = { sepia: 'copper-balance' };
        var stored = localStorage.getItem('inv101_theme');
        var legacy = localStorage.getItem('darkMode') === 'true' ? 'dark' : null;
        var theme = (stored || legacy || 'light').toLowerCase();
        if (theme.indexOf('theme-') === 0) theme = theme.slice(6);
        if (alias[theme]) theme = alias[theme];
        if (supported.indexOf(theme) === -1) theme = 'light';
        var root = document.documentElement;
        var purge = ['dark-mode','theme-sepia'];
        supported.forEach(function(id){ purge.push('theme-' + id); });
        purge.forEach(function(cls){ root.classList.remove(cls); });
        root.classList.add('theme-' + theme);
      } catch (e) {}
    })();
  </script>
</head>
<body>
  <script src="global-ui.js"></script>
  <div class="app">
    <header class="app__header">
      <a class="link-button" href="calc-core.html">← Back to CORE</a>
      <span>Risk/Reward Ratio</span>
      <span></span>
    </header>
    <main class="app__content">
      <section class="card">
        <h2>Risk/Reward Ratio Calculator</h2>
        <p>Evaluate the potential reward vs. risk of a trade before entering.</p>
        
        <form id="riskRewardForm" style="margin-top: 20px;">
          <div style="margin-bottom: 16px;">
            <label style="display: block; font-weight: 600; margin-bottom: 6px;">Entry Price ($)</label>
            <input type="number" id="entry" step="0.01" min="0" placeholder="50.00" style="width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 8px; font-size: 1rem; background: var(--bg-card); color: var(--text);">
          </div>
          
          <div style="margin-bottom: 16px;">
            <label style="display: block; font-weight: 600; margin-bottom: 6px;">Target Price ($)</label>
            <input type="number" id="target" step="0.01" min="0" placeholder="60.00" style="width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 8px; font-size: 1rem; background: var(--bg-card); color: var(--text);">
          </div>
          
          <div style="margin-bottom: 16px;">
            <label style="display: block; font-weight: 600; margin-bottom: 6px;">Stop Loss Price ($)</label>
            <input type="number" id="stopLoss" step="0.01" min="0" placeholder="45.00" style="width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 8px; font-size: 1rem; background: var(--bg-card); color: var(--text);">
          </div>
          
          <div style="margin-bottom: 16px;">
            <label style="display: block; font-weight: 600; margin-bottom: 6px;">Position Size (optional, for dollar amounts)</label>
            <input type="number" id="positionSize" step="0.01" min="0" placeholder="1000" style="width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 8px; font-size: 1rem; background: var(--bg-card); color: var(--text);">
          </div>
          
          <button type="submit" class="btn btn--primary" style="width: 100%; padding: 14px; font-size: 1.1rem;">Calculate</button>
        </form>
        
        <div id="result" style="display: none; margin-top: 24px; padding: 20px; background: var(--bg-muted); border-radius: 12px; border: 2px solid var(--accent);">
          <h3 style="margin-bottom: 16px; color: var(--accent);">Results</h3>
          <div style="display: grid; gap: 12px;">
            <div style="display: flex; justify-content: space-between; padding: 12px; background: var(--bg-card); border-radius: 8px;">
              <span style="font-weight: 600;">Risk/Reward Ratio:</span>
              <span id="ratio" style="font-size: 1.3rem; font-weight: bold; color: var(--accent);"></span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 12px; background: var(--bg-card); border-radius: 8px;">
              <span style="font-weight: 600;">Potential Reward:</span>
              <span id="reward"></span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 12px; background: var(--bg-card); border-radius: 8px;">
              <span style="font-weight: 600;">Potential Risk:</span>
              <span id="risk"></span>
            </div>
            <div id="dollarAmounts" style="display: none;">
              <div style="display: flex; justify-content: space-between; padding: 12px; background: var(--bg-card); border-radius: 8px; margin-bottom: 12px;">
                <span style="font-weight: 600;">$ Reward:</span>
                <span id="dollarReward" style="color: #10b981; font-weight: bold;"></span>
              </div>
              <div style="display: flex; justify-content: space-between; padding: 12px; background: var(--bg-card); border-radius: 8px;">
                <span style="font-weight: 600;">$ Risk:</span>
                <span id="dollarRisk" style="color: #ef4444; font-weight: bold;"></span>
              </div>
            </div>
            <div style="padding: 12px; background: var(--bg-card); border-radius: 8px; margin-top: 8px;">
              <p id="assessment" style="text-align: center; font-weight: 600; margin: 0;"></p>
            </div>
          </div>
        </div>
      </section>
    </main>
    <nav class="tabbar" aria-label="Primary navigation">
      <a class="tabbar__btn" href="index.html">
        <svg class="icon icon--tab" viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-home"></use></svg>
        <span>Main</span>
      </a>
      <a class="tabbar__btn" href="simulator.html">
        <svg class="icon icon--tab" viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-sim"></use></svg>
        <span>Sim/AI</span>
      </a>
      <a class="tabbar__btn" href="lessons.html">
        <svg class="icon icon--tab" viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-lessons"></use></svg>
        <span>Lessons</span>
      </a>
      <a class="tabbar__btn tabbar__btn--active" href="calculators.html">
        <svg class="icon icon--tab" viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-calc"></use></svg>
        <span>Calc</span>
      </a>
      <a class="tabbar__btn" href="profile.html">
        <svg class="icon icon--tab" viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-profile"></use></svg>
        <span>Profile</span>
      </a>
    </nav>
  </div>
  <script>
    document.getElementById('riskRewardForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const entry = parseFloat(document.getElementById('entry').value);
      const target = parseFloat(document.getElementById('target').value);
      const stopLoss = parseFloat(document.getElementById('stopLoss').value);
      const positionSize = parseFloat(document.getElementById('positionSize').value) || 0;
      if (isNaN(entry) || isNaN(target) || isNaN(stopLoss)) {
        alert('Please fill in entry, target, and stop loss prices');
        return;
      }
      const reward = target - entry;
      const risk = entry - stopLoss;
      if (risk <= 0) {
        alert('Stop loss must be below entry price');
        return;
      }
      const ratio = reward / risk;
      document.getElementById('ratio').textContent = '1:' + ratio.toFixed(2);
      document.getElementById('reward').textContent = '$' + reward.toFixed(2) + ' per share (' + ((reward/entry)*100).toFixed(2) + '%)';
      document.getElementById('reward').style.color = '#10b981';
      document.getElementById('risk').textContent = '$' + risk.toFixed(2) + ' per share (' + ((risk/entry)*100).toFixed(2) + '%)';
      document.getElementById('risk').style.color = '#ef4444';
      if (positionSize > 0) {
        const shares = positionSize / entry;
        document.getElementById('dollarReward').textContent = '$' + (reward * shares).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        document.getElementById('dollarRisk').textContent = '$' + (risk * shares).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        document.getElementById('dollarAmounts').style.display = 'block';
      } else {
        document.getElementById('dollarAmounts').style.display = 'none';
      }
      let assessment = '';
      let assessmentColor = '';
      if (ratio >= 3) {
        assessment = '✅ Excellent risk/reward ratio (3:1 or better)';
        assessmentColor = '#10b981';
      } else if (ratio >= 2) {
        assessment = '✅ Good risk/reward ratio (2:1 or better)';
        assessmentColor = '#10b981';
      } else if (ratio >= 1) {
        assessment = '⚠️ Acceptable but below ideal (aim for 2:1+)';
        assessmentColor = '#f59e0b';
      } else {
        assessment = '❌ Poor risk/reward ratio (reward less than risk)';
        assessmentColor = '#ef4444';
      }
      document.getElementById('assessment').textContent = assessment;
      document.getElementById('assessment').style.color = assessmentColor;
      document.getElementById('result').style.display = 'block';
      document.getElementById('result').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    });
  </script>
</body>
</html>

