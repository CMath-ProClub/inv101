<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Net Profit After Tax</title>
  <link rel="stylesheet" href="dist/main.css">
  <script src="device-detection.js"></script>
  <script>
    (function(){
      try {
        var supported = ['light','dark','ultradark','emerald-trust','quantum-violet','copper-balance','regal-portfolio','carbon-edge'];
        var alias = { sepia: 'copper-balance' };
        var stored = localStorage.getItem('inv101_theme');
        var legacy = localStorage.getItem('darkMode') === 'true' ? 'dark' : null;
        var theme = (stored || legacy || 'light').toLowerCase();
        if (theme.indexOf('theme-') === 0) theme = theme.slice(6);
        if (alias[theme]) theme = alias[theme];
        if (supported.indexOf(theme) === -1) theme = 'light';
        var root = document.documentElement;
        var purge = ['dark-mode','theme-sepia'];
        supported.forEach(function(id){ purge.push('theme-' + id); });
        purge.forEach(function(cls){ root.classList.remove(cls); });
        root.classList.add('theme-' + theme);
      } catch (e) {}
    })();
  </script>
</head>
<body class="bg-white dark:bg-slate-950">
  <script src="global-ui.js"></script>
  <div class="flex min-h-screen flex-col">
    <header class="flex items-center justify-between border-b border-slate-200 bg-white px-6 py-4 dark:border-slate-800 dark:bg-slate-900">
      <a class="link-button" href="calc-tax.html">â† Back to TAX</a>
      <span>Net Profit After Tax</span>
      <span></span>
    </header>
    <main class="flex-1 overflow-auto">
      <section class="card">
        <h2>Net Profit After Tax Calculator</h2>
        <p>Calculate your take-home profit after taxes and business expenses.</p>
        
        <form id="netProfitForm" style="margin-top: 20px;">
          <div style="margin-bottom: 16px;">
            <label style="display: block; font-weight: 600; margin-bottom: 6px;">Gross Profit/Revenue ($)</label>
            <input type="number" id="grossProfit" step="0.01" min="0" placeholder="100000" style="width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 8px; font-size: 1rem; background: var(--bg-card); color: var(--text);">
          </div>
          
          <div style="margin-bottom: 16px;">
            <label style="display: block; font-weight: 600; margin-bottom: 6px;">Business Expenses ($)</label>
            <input type="number" id="expenses" step="0.01" min="0" placeholder="20000" style="width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 8px; font-size: 1rem; background: var(--bg-card); color: var(--text);">
            <small style="color: var(--text-muted);">Deductible business expenses</small>
          </div>
          
          <div style="margin-bottom: 16px;">
            <label style="display: block; font-weight: 600; margin-bottom: 6px;">Tax Rate (%)</label>
            <input type="number" id="taxRate" step="0.1" min="0" max="100" placeholder="25" style="width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 8px; font-size: 1rem; background: var(--bg-card); color: var(--text);">
            <small style="color: var(--text-muted);">Combined federal + state tax rate, or use calculator below</small>
          </div>
          
          <div style="margin-bottom: 16px; padding: 14px; background: var(--bg-muted); border-radius: 8px;">
            <h4 style="margin: 0 0 10px 0; font-size: 0.95rem;">Or Calculate Tax Rate:</h4>
            <div style="display: grid; gap: 10px;">
              <div>
                <label style="display: block; font-size: 0.9rem; margin-bottom: 4px;">Filing Status</label>
                <select id="filingStatus" style="width: 100%; padding: 10px; border: 2px solid var(--border); border-radius: 6px; background: var(--bg-card); color: var(--text);">
                  <option value="single">Single</option>
                  <option value="married">Married Filing Jointly</option>
                </select>
              </div>
              <button type="button" id="calculateTaxRate" style="padding: 10px; background: var(--accent); color: var(--bg); border: none; border-radius: 6px; font-weight: 600; cursor: pointer;">
                Calculate My Tax Rate
              </button>
            </div>
          </div>
          
          <button type="submit" class="btn btn--primary" style="width: 100%; padding: 14px; font-size: 1.1rem;">Calculate Net Profit</button>
        </form>
        
        <div id="result" style="display: none; margin-top: 24px; padding: 20px; background: var(--bg-muted); border-radius: 12px; border: 2px solid var(--accent);">
          <h3 style="margin-bottom: 16px; color: var(--accent);">Results</h3>
          <div style="display: grid; gap: 12px;">
            <div style="display: flex; justify-content: space-between; padding: 12px; background: var(--bg-card); border-radius: 8px;">
              <span style="font-weight: 600;">Gross Profit:</span>
              <span id="grossDisplay"></span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 12px; background: var(--bg-card); border-radius: 8px;">
              <span style="font-weight: 600;">Business Expenses:</span>
              <span id="expensesDisplay" style="color: #ef4444;"></span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 12px; background: var(--bg-card); border-radius: 8px;">
              <span style="font-weight: 600;">Taxable Income:</span>
              <span id="taxableIncome"></span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 12px; background: var(--bg-card); border-radius: 8px;">
              <span style="font-weight: 600;">Tax Owed:</span>
              <span id="taxOwed" style="color: #ef4444; font-weight: bold;"></span>
            </div>
            <div style="padding: 16px; background: var(--bg-card); border-radius: 8px; border-left: 4px solid #10b981;">
              <div style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 4px;">Net Profit After Tax</div>
              <div id="netProfit" style="font-size: 1.8rem; font-weight: bold; color: #10b981;"></div>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 12px; background: var(--bg-card); border-radius: 8px;">
              <span style="font-weight: 600;">Net Profit Margin:</span>
              <span id="profitMargin" style="font-weight: bold;"></span>
            </div>
          </div>
        </div>
      </section>
    </main>
    <nav class="fixed bottom-0 left-0 right-0 flex border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900"><a class="flex-1 flex flex-col items-center justify-center gap-1 border-r border-slate-200 px-2 py-3 text-sm font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-primary-green dark:border-slate-800 dark:text-slate-300 dark:hover:bg-slate-900 dark:hover:text-primary-green" href="index.html"><svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 10.5L12 3l9 7.5" /><path d="M5 10.5V21h14V10.5" /><path d="M9 21v-6h6v6" /></svg><span>Main</span></a><a class="flex-1 flex flex-col items-center justify-center gap-1 border-r border-slate-200 px-2 py-3 text-sm font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-primary-green dark:border-slate-800 dark:text-slate-300 dark:hover:bg-slate-900 dark:hover:text-primary-green" href="simulator.html"><svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="9" /><circle cx="12" cy="12" r="3" /><path d="M12 3v3" /><path d="M12 18v3" /><path d="M3 12h3" /><path d="M18 12h3" /></svg><span>Sim/AI</span></a><a class="flex-1 flex flex-col items-center justify-center gap-1 border-r border-slate-200 px-2 py-3 text-sm font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-primary-green dark:border-slate-800 dark:text-slate-300 dark:hover:bg-slate-900 dark:hover:text-primary-green" href="lessons.html"><svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19V5l8-3 8 3v14l-8 3-8-3z" /><path d="M4 12l8 3 8-3" /><path d="M12 5v10" /></svg><span>Lessons</span></a><a class="flex-1 flex flex-col items-center justify-center gap-1 border-r border-slate-200 px-2 py-3 text-sm font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-primary-green dark:border-slate-800 dark:text-slate-300 dark:hover:bg-slate-900 dark:hover:text-primary-green tabbar__btn--active" href="calculators.html"><svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="16" rx="2" /><path d="M7 8h10" /><path d="M7 12h10" /><path d="M7 16h4" /></svg><span>Calc</span></a><a class="flex-1 flex flex-col items-center justify-center gap-1 border-r border-slate-200 px-2 py-3 text-sm font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-primary-green dark:border-slate-800 dark:text-slate-300 dark:hover:bg-slate-900 dark:hover:text-primary-green" href="profile.html"><svg class="icon icon--tab" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="4" /><path d="M4 20c0-4 4-6 8-6s8 2 8 6" /></svg><span>Profile</span></a></nav>
  </div>
  <script>
    document.getElementById('calculateTaxRate').addEventListener('click', function() {
      const grossProfit = parseFloat(document.getElementById('grossProfit').value) || 0;
      const expenses = parseFloat(document.getElementById('expenses').value) || 0;
      const filingStatus = document.getElementById('filingStatus').value;
      const taxableIncome = grossProfit - expenses;
      
      if (taxableIncome <= 0) {
        alert('Enter gross profit and expenses first');
        return;
      }
      
      const brackets2025 = {
        single: [
          { max: 11925, rate: 10 },
          { max: 48475, rate: 12 },
          { max: 103350, rate: 22 },
          { max: 197300, rate: 24 },
          { max: 250525, rate: 32 },
          { max: 626350, rate: 35 },
          { max: Infinity, rate: 37 }
        ],
        married: [
          { max: 23850, rate: 10 },
          { max: 96950, rate: 12 },
          { max: 206700, rate: 22 },
          { max: 394600, rate: 24 },
          { max: 501050, rate: 32 },
          { max: 751600, rate: 35 },
          { max: Infinity, rate: 37 }
        ]
      };
      
      const brackets = brackets2025[filingStatus];
      let tax = 0;
      let prevMax = 0;
      
      for (const bracket of brackets) {
        if (taxableIncome > bracket.max) {
          tax += (bracket.max - prevMax) * (bracket.rate / 100);
          prevMax = bracket.max;
        } else {
          tax += (taxableIncome - prevMax) * (bracket.rate / 100);
          break;
        }
      }
      
      const effectiveRate = (tax / taxableIncome) * 100;
      document.getElementById('taxRate').value = effectiveRate.toFixed(2);
      alert('Your effective federal tax rate: ' + effectiveRate.toFixed(2) + '%\n\n(Add state tax if applicable)');
    });
    
    document.getElementById('netProfitForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const grossProfit = parseFloat(document.getElementById('grossProfit').value);
      const expenses = parseFloat(document.getElementById('expenses').value) || 0;
      const taxRate = parseFloat(document.getElementById('taxRate').value) / 100;
      
      if (isNaN(grossProfit) || isNaN(taxRate)) {
        alert('Please fill in gross profit and tax rate');
        return;
      }
      
      const taxableIncome = grossProfit - expenses;
      const taxOwed = taxableIncome * taxRate;
      const netProfit = taxableIncome - taxOwed;
      const profitMargin = (netProfit / grossProfit) * 100;
      
      document.getElementById('grossDisplay').textContent = '$' + grossProfit.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      document.getElementById('expensesDisplay').textContent = '-$' + expenses.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      document.getElementById('taxableIncome').textContent = '$' + taxableIncome.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      document.getElementById('taxOwed').textContent = '-$' + taxOwed.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      document.getElementById('netProfit').textContent = '$' + netProfit.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      document.getElementById('profitMargin').textContent = profitMargin.toFixed(1) + '%';
      
      document.getElementById('result').style.display = 'block';
      document.getElementById('result').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    });
  </script>
</body>
</html>


